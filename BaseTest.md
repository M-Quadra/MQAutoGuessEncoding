# 性能测试

由于重复调用时会被先后次序影响消耗时间, 因此每次只测试一种模型

由于在`framework`中引用`SwiftPM`会出现符号表问题, 乱码检测的相关文件修改了归属`Target`

## iOS 13.3

Swift | 耗时(avg/s)
:--:|:--:
Uint4xUint4 | 0.3025191307067871
Uint8 | 0.30083568890889484
乱码检测(旧) | 2.1187207102775574

Objective-C | 耗时(avg/s)
:--:|:--:
Uint4xUint4 | 0.33974605798721313

测试文本 | 文件大小 | 乱码检测(旧) | Uint8 | Uint4xUint4
:--:|:--:|:--:|:--:|:--:
jsmn-gb2312 | 16.1 MB | | ✅ | ✅
jsmn-utf8 | 23.2 MB | | ✅ | ✅
mdzs-utf8 | 1.9 MB | | ✅ | ✅
wbdl-gb2312 | 29 KB | | ✅ | ✅
wbdl-utf8 | 38 KB | | ✅ | ✅
wbqd-utf8 | 38 KB | | ✅ | ✅
wbw-utf8 | 8 KB | | ❌ | ✅
wbzh-utf8| 399 KB | | ✅ | ✅
wbzw-gb2312 | 17 KB | | ✅ | ✅
wbzw-utf8 | 18 KB | | ✅ | ✅
yhds-gb2312 | 27 MB | | ✅ | ✅
yhds-utf8 | 39.7 MB | | ✅ | ✅

## iOS 13.2

Swift | 耗时(avg/s) | 训练准确率(acc)
:--:|:--:|:--:
Uint4xUint4 | 0.31170862913131714 | 65~70%
Uint8 | 0.31289243698120117 | 60%
乱码检测(旧) | 2.0627461075782776 | 99%

Objective-C | 耗时(avg/s)
:--:|:--:
Uint4xUint4 | 0.3377035856246948

测试文本 | 文件大小 | 字符集编码
:--:|:--:|:--:
 ① | 16.4 MB | GB2312
 ② | 1.9 MB | UTF-8
 ③ | 27 MB | GB2312
 ④ | 39.7 MB | UTF-8

其中③与④解码后内容相同

后续可能会补充其他方案在`OC`下的性能测试